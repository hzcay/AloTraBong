<!DOCTYPE html>
<html
  xmlns:th="http://www.thymeleaf.org"
  lang="vi"
  th:replace="~{fragments/layout :: layout(~{::content}, 'Trang ch·ªß')}"
>
  <div th:fragment="content">
    <!-- HERO -->
    <section
      class="gradient-hero"
      style="padding: 48px 0; border-bottom: 2px solid #000"
    >
      <div
        class="container"
        style="
          display: grid;
          grid-template-columns: 1.15fr 0.85fr;
          gap: 28px;
          align-items: center;
        "
      >
        <div>
          <p style="margin: 0 0 6px; color: #222">
            Xin ch√†o,
            <b th:text="${userName} ?: 'Ng∆∞·ªùi d√πng VIP'">Ng∆∞·ªùi d√πng VIP</b> üëã
          </p>
          <h1
            style="
              font-size: 42px;
              line-height: 1.1;
              margin: 0 0 12px;
              font-weight: 900;
              text-transform: uppercase;
            "
          >
            EAT FAST. LIVE HAPPY.
          </h1>
          <p style="color: #222; max-width: 560px">
            M√≥n n√≥ng h·ªïi ‚Äì ƒë·∫∑t l√† c√≥. Giao nhanh, ngon chu·∫©n, gi√° ·ªïn √°p.
          </p>
          <div style="margin-top: 16px; display: flex; gap: 12px">
            <a th:href="@{/menu}" class="btn btn-primary">ƒê·∫∑t ngay</a>
            <a th:href="@{/coupons}" class="btn">∆Øu ƒë√£i h√¥m nay</a>
          </div>
        </div>
        <div class="card" style="padding: 16px; background: #fff8f1">
          <img
            th:src="@{/img/hero-food.jpg}"
            src="/img/hero-food.jpg"
            alt="M√≥n n·ªïi b·∫≠t"
            style="width: 100%; border-radius: 8px"
          />
        </div>
      </div>
    </section>

    <!-- TABS DANH M·ª§C -->
    <section class="container" style="padding: 26px 0">
      <header
        style="
          display: flex;
          justify-content: space-between;
          align-items: end;
          margin-bottom: 12px;
        "
      >
        <h2
          style="
            font-size: 24px;
            font-weight: 900;
            text-transform: uppercase;
            margin: 0;
          "
        >
          Kh√°m ph√° m√≥n ngon
        </h2>
        <a th:href="@{/menu}" class="btn">Xem Menu</a>
      </header>

      <!-- tab controls -->
      <div
        style="
          display: flex;
          gap: 14px;
          border-bottom: 1px solid var(--line);
          margin-bottom: 14px;
        "
      >
        <button class="tab is-active" data-tab="new">M√≥n m·ªõi</button>
        <button class="tab" data-tab="best">B√°n ch·∫°y</button>
        <button class="tab" data-tab="fav">ƒê∆∞·ª£c y√™u th√≠ch</button>
      </div>

      <!-- tab panels -->
      <div data-panel="new">
        <div
          style="
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 18px;
          "
        >
          <!-- CARD S·∫¢N PH·∫®M (M√ìN M·ªöI) -->
          <article
            class="card"
            style="padding: 12px"
            th:each="p : ${productsNew}"
          >
            <img
              th:src="${p.thumbnailUrl}"
              alt=""
              style="width: 100%; border-radius: 8px"
            />
            <h3
              style="font-weight: 800; margin: 10px 0 4px"
              th:text="${p.name}"
            >
              T√™n m√≥n
            </h3>
            <div
              style="
                display: flex;
                justify-content: space-between;
                align-items: center;
              "
            >
              <strong th:text="${#numbers.formatInteger(p.price)} + 'ƒë'"
                >49.000ƒë</strong
              >
              <form th:action="@{/cart}" method="post">
                <input type="hidden" name="productId" th:value="${p.id}" />
                <button class="btn" type="submit">+ Gi·ªè</button>
              </form>
            </div>
          </article>
        </div>

        <!-- empty state -->
        <div
          th:if="${#lists.isEmpty(productsNew)}"
          style="padding: 16px; color: var(--ink-2)"
        >
          Ch∆∞a c√≥ m√≥n m·ªõi. Quay l·∫°i sau nha!
        </div>

        <!-- load more -->
        <div style="display: flex; justify-content: center; margin-top: 14px">
          <a th:href="@{/menu(category='new')}" class="btn">Xem th√™m</a>
        </div>
      </div>

      <div data-panel="best" hidden>
        <div
          style="
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 18px;
          "
        >
          <!-- CARD S·∫¢N PH·∫®M (B√ÅN CH·∫†Y) -->
          <article
            class="card"
            style="padding: 12px"
            th:each="p : ${productsBest}"
          >
            <img
              th:src="${p.thumbnailUrl}"
              alt=""
              style="width: 100%; border-radius: 8px"
            />
            <h3
              style="font-weight: 800; margin: 10px 0 4px"
              th:text="${p.name}"
            >
              T√™n m√≥n
            </h3>
            <div
              style="
                display: flex;
                justify-content: space-between;
                align-items: center;
              "
            >
              <strong th:text="${#numbers.formatInteger(p.price)} + 'ƒë'"
                >49.000ƒë</strong
              >
              <form th:action="@{/cart}" method="post">
                <input type="hidden" name="productId" th:value="${p.id}" />
                <button class="btn" type="submit">+ Gi·ªè</button>
              </form>
            </div>
          </article>
        </div>
        <div
          th:if="${#lists.isEmpty(productsBest)}"
          style="padding: 16px; color: var(--ink-2)"
        >
          Ch∆∞a c√≥ d·ªØ li·ªáu b√°n ch·∫°y.
        </div>
        <div style="display: flex; justify-content: center; margin-top: 14px">
          <a th:href="@{/menu(sort='best')}" class="btn">Xem th√™m</a>
        </div>
      </div>

      <div data-panel="fav" hidden>
        <div
          style="
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 18px;
          "
        >
          <!-- CARD S·∫¢N PH·∫®M (ƒê∆Ø·ª¢C Y√äU TH√çCH) -->
          <article
            class="card"
            style="padding: 12px"
            th:each="p : ${productsFav}"
          >
            <img
              th:src="${p.thumbnailUrl}"
              alt=""
              style="width: 100%; border-radius: 8px"
            />
            <h3
              style="font-weight: 800; margin: 10px 0 4px"
              th:text="${p.name}"
            >
              T√™n m√≥n
            </h3>
            <div
              style="
                display: flex;
                justify-content: space-between;
                align-items: center;
              "
            >
              <strong th:text="${#numbers.formatInteger(p.price)} + 'ƒë'"
                >49.000ƒë</strong
              >
              <form th:action="@{/cart}" method="post">
                <input type="hidden" name="productId" th:value="${p.id}" />
                <button class="btn" type="submit">+ Gi·ªè</button>
              </form>
            </div>
          </article>
        </div>
        <div
          th:if="${#lists.isEmpty(productsFav)}"
          style="padding: 16px; color: var(--ink-2)"
        >
          Ch∆∞a c√≥ m√≥n y√™u th√≠ch ƒë·ªÉ hi·ªÉn th·ªã.
        </div>
        <div style="display: flex; justify-content: center; margin-top: 14px">
          <a th:href="@{/menu(filter='favorite')}" class="btn">Xem th√™m</a>
        </div>
      </div>
    </section>

    <!-- ƒê·∫∂T L·∫†I G·∫¶N ƒê√ÇY (OPTIONAL) -->
    <section
      class="container"
      style="padding: 8px 0 28px"
      th:if="${recentItems != null}"
    >
      <header
        style="
          display: flex;
          justify-content: space-between;
          align-items: end;
          margin-bottom: 12px;
        "
      >
        <h2
          style="
            font-size: 20px;
            font-weight: 900;
            text-transform: uppercase;
            margin: 0;
          "
        >
          ƒê·∫∑t l·∫°i g·∫ßn ƒë√¢y
        </h2>
        <a th:href="@{/orders}" class="btn">Xem ƒë∆°n</a>
      </header>
      <div
        style="display: grid; grid-template-columns: repeat(5, 1fr); gap: 16px"
      >
        <article
          class="card"
          style="padding: 10px"
          th:each="p : ${recentItems}"
        >
          <img
            th:src="${p.thumbnailUrl}"
            alt=""
            style="width: 100%; border-radius: 8px"
          />
          <div
            style="
              display: flex;
              justify-content: space-between;
              align-items: center;
              margin-top: 6px;
            "
          >
            <span style="font-weight: 700" th:text="${p.name}">T√™n m√≥n</span>
            <form th:action="@{/cart}" method="post">
              <input type="hidden" name="productId" th:value="${p.id}" />
              <button class="btn" type="submit">+ Gi·ªè</button>
            </form>
          </div>
        </article>
      </div>
    </section>
  </div>

  <!-- tiny JS: chuy·ªÉn tab ƒë∆°n gi·∫£n -->
  <script>
    (function () {
      const tabs = [...document.querySelectorAll(".tab")];
      const panels = {
        new: document.querySelector('[data-panel="new"]'),
        best: document.querySelector('[data-panel="best"]'),
        fav: document.querySelector('[data-panel="fav"]'),
      };
      tabs.forEach((t) => {
        t.addEventListener("click", () => {
          tabs.forEach((x) => x.classList.remove("is-active"));
          t.classList.add("is-active");
          Object.values(panels).forEach((p) => (p.hidden = true));
          panels[t.dataset.tab].hidden = false;
        });
      });
    })();
  </script>
</html>
