<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" lang="vi"
      th:replace="~{fragments/layout :: layout(~{::content}, 'S·∫£n ph·∫©m y√™u th√≠ch')}">
<div th:fragment="content">

  <section class="section">
    <div class="container">
      <header class="section-head">
        <h2 class="section-title m-0">S·∫£n ph·∫©m y√™u th√≠ch</h2>
        <!-- Tu·ª≥ app: n·∫øu mu·ªën ƒë∆∞a v·ªÅ trang menu c·ªßa b·∫°n -->
        <a th:href="@{/user/product/list}" class="btn">+ Th√™m m√≥n</a>
      </header>

      <!-- Empty -->
      <div th:if="${#lists.isEmpty(items)}" class="card pad text-muted">
        Ch∆∞a c√≥ m√≥n n√†o trong danh s√°ch y√™u th√≠ch.
        <a th:href="@{/user/product/list}">Kh√°m ph√° Menu ‚Üí</a>
      </div>

      <!-- Grid -->
      <div class="grid grid-4" th:if="${!#lists.isEmpty(items)}">
        <article class="card pad" th:each="p : ${items}">
          <img th:src="${p.thumbnailUrl}" alt="">
          <h3 class="m-0 mb-1 bold" th:text="${p.name}">T√™n m√≥n</h3>

          <div class="center-between">
            <strong th:text="${#numbers.formatInteger(p.price)} + 'ƒë'">49.000ƒë</strong>
            <div class="center" style="gap:8px">
              <!-- B·ªè y√™u th√≠ch -->
              <form th:action="@{'/user/favorite/' + ${p.id} + '/remove'}" method="post">
                <input type="hidden" th:name="${_csrf.parameterName}" th:value="${_csrf.token}"/>
                <button class="btn" type="submit" title="B·ªè kh·ªèi y√™u th√≠ch">üíî</button>
              </form>
              <!-- Th√™m gi·ªè -->
              <form th:action="@{/user/cart}" method="post">
                <input type="hidden" th:name="${_csrf.parameterName}" th:value="${_csrf.token}"/>
                <input type="hidden" name="productId" th:value="${p.id}">
                <button class="btn" type="submit">+ Gi·ªè</button>
              </form>
            </div>
          </div>

          <a th:href="@{'/user/product/detail/' + ${p.slug}}" class="text-muted">Xem chi ti·∫øt ‚Üí</a>
        </article>
      </div>

      <!-- Pagination -->
      <div th:if="${page != null && page.totalPages > 1}" class="center" style="gap:8px;margin-top:16px">
        <a class="btn" th:if="${!page.first}" th:href="@{/user/favorite/list(page=${page.number-1})}">‚Üê Tr∆∞·ªõc</a>
        <span>Trang <b th:text="${page.number+1}">1</b>/<b th:text="${page.totalPages}">1</b></span>
        <a class="btn" th:if="${!page.last}" th:href="@{/user/favorite/list(page=${page.number+1})}">Sau ‚Üí</a>
      </div>
    </div>
  </section>

</div>
</html>
