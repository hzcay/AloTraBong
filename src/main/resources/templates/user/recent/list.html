<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" lang="vi"
      th:replace="~{fragments/layout :: layout(~{::content}, 'Đã xem gần đây')}">
<div th:fragment="content">

  <section class="section">
    <div class="container">
      <header class="section-head">
        <h2 class="section-title m-0">Đã xem gần đây</h2>
        <a th:href="@{/menu}" class="btn">Khám phá Menu</a>
      </header>

      <!-- Empty -->
      <div th:if="${#lists.isEmpty(items)}" class="card pad text-muted">
        Chưa có món nào trong lịch sử. Vào <a th:href="@{/menu}">Menu</a> xem món nhé!
      </div>

      <!-- Grid -->
      <div class="grid grid-4" th:if="${!#lists.isEmpty(items)}">
        <article class="card pad" th:each="p : ${items}">
          <img th:src="${p.thumbnailUrl}" alt="">
          <h3 class="m-0 mb-1 bold" th:text="${p.name}">Tên món</h3>
          <div class="center-between">
            <strong th:text="${#numbers.formatInteger(p.price)} + 'đ'">49.000đ</strong>
            <form th:action="@{/cart}" method="post">
              <input type="hidden" name="productId" th:value="${p.id}">
              <button class="btn" type="submit">+ Giỏ</button>
            </form>
          </div>
          <a th:href="@{'/p/' + ${p.slug}}" class="text-muted">Xem chi tiết →</a>
        </article>
      </div>

      <!-- Clear history -->
      <div class="center" style="gap:8px;margin-top:16px" th:if="${!#lists.isEmpty(items)}">
        <form th:action="@{/recent/clear}" method="post">
          <button class="btn" type="submit">Xóa lịch sử</button>
        </form>
      </div>
    </div>
  </section>

</div>
</html>
